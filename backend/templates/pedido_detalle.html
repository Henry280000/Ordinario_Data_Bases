{% extends 'base.html' %}

{% block title %}Detalle del Pedido #{{ pedido.id_pedido }}{% endblock %}

{% block content %}
<section class="section">
    <div style="max-width: 1000px; margin: 0 auto;">
        <a href="{{ url_for('mis_pedidos') }}" class="btn btn-secondary" style="margin-bottom: 20px;">VOLVER A MIS PEDIDOS</a>
        
        <div style="background: white; padding: 30px; border-radius: 8px; margin-bottom: 20px;">
            <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 30px;">
                <div>
                    <p style="color: #767677; font-size: 14px; margin-bottom: 5px;">ID PEDIDO</p>
                    <p style="font-weight: 900; font-size: 24px;">#{{ pedido.id_pedido }}</p>
                </div>
                <div>
                    <p style="color: #767677; font-size: 14px; margin-bottom: 5px;">FECHA</p>
                    <p style="font-weight: 700;">{{ pedido.fecha_pedido.strftime('%d/%m/%Y %H:%M') }}</p>
                </div>
                <div>
                    <p style="color: #767677; font-size: 14px; margin-bottom: 5px;">ESTADO</p>
                    <span style="padding: 8px 20px; border-radius: 20px; font-weight: 700; display: inline-block;
                        {% if pedido.estado == 'COMPLETADO' %}background: #28a745; color: white;
                        {% elif pedido.estado == 'PENDIENTE' %}background: #ffc107; color: #000;
                        {% elif pedido.estado == 'CANCELADO' %}background: #dc3545; color: white;
                        {% else %}background: #17a2b8; color: white;{% endif %}">
                        {{ pedido.estado }}
                    </span>
                </div>
            </div>
            
            {% if pedido.direccion_envio %}
            <div style="border-top: 1px solid #eee; padding-top: 20px; margin-bottom: 20px;">
                <p style="color: #767677; font-size: 14px; margin-bottom: 5px;">DIRECCIÓN DE ENVÍO</p>
                <p>{{ pedido.direccion_envio }}</p>
            </div>
            {% endif %}
        </div>
        
        <div style="background: white; padding: 30px; border-radius: 8px;">
            <h3 style="font-weight: 700; margin-bottom: 20px;">PRODUCTOS</h3>
            
            <table style="width: 100%;">
                <thead style="border-bottom: 2px solid #000;">
                    <tr>
                        <th style="padding: 15px; text-align: left;">PRODUCTO</th>
                        <th style="padding: 15px;">TALLA</th>
                        <th style="padding: 15px;">PRECIO</th>
                        <th style="padding: 15px;">CANTIDAD</th>
                        <th style="padding: 15px;">SUBTOTAL</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in detalles %}
                    <tr style="border-bottom: 1px solid #eee;">
                        <td style="padding: 15px;">
                            <strong>{{ item.nombre_producto }}</strong><br>
                            <small style="color: #767677;">SKU: {{ item.sku }}</small>
                        </td>
                        <td style="padding: 15px; text-align: center;">{{ item.talla }}</td>
                        <td style="padding: 15px; text-align: center;">${{ "%.2f"|format(item.precio_unitario) }}</td>
                        <td style="padding: 15px; text-align: center;">{{ item.cantidad }}</td>
                        <td style="padding: 15px; text-align: center; font-weight: 700;">${{ "%.2f"|format(item.subtotal) }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            
            <div style="text-align: right; margin-top: 30px; padding-top: 20px; border-top: 2px solid #000;">
                <div style="font-size: 24px; font-weight: 900;">
                    TOTAL: <span style="color: #ff6b00;">${{ "%.2f"|format(pedido.total) }}</span>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
